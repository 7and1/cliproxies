# Cloudflare Workers Configuration
# Copy this file to wrangler.toml and add your account_id
# wrangler.toml is in .gitignore and should never be committed

name = "cliproxies-web"
main = ".open-next/worker.js"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat", "global_fetch_strictly_public"]

# Your Cloudflare Account ID (required for deployment)
# Get it from: https://dash.cloudflare.com -> Workers & Pages
# Or set as environment variable: CLOUDFLARE_ACCOUNT_ID
account_id = "YOUR_ACCOUNT_ID_HERE"

# Static assets from OpenNext build
[assets]
directory = ".open-next/assets"
binding = "ASSETS"
html_handling = "auto-trailing-slash"

# Worker self-reference binding
[[services]]
binding = "WORKER_SELF_REFERENCE"
service = "cliproxies-web"

# Environment variables
[vars]
NEXT_PUBLIC_SITE_URL = "https://cliproxies.com"

# Images binding
[images]
binding = "IMAGES"

# Static asset caching rules
[[rules]]
type = "Text"
fallback = { type = "Static" }
globs = [
  { type = "Path", regex = "^/_next/static/(.*)$" },
  { type = "Path", regex = "^/opengraph-image.*$" },
  { type = "Path", regex = "^/.*\\.(svg|png|jpg|jpeg|webp|avif|ico)$" }
]
